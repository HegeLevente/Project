<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>AJAX - EJS frontend</title>
<style>
 .tabl {width:400px;border:1px solid blue;display:table}
 .row {height:40px;display:table-row}
 .cell {border:1px solid black;display:table-cell}

 .flex-parent-element {
  display: flex;
  width: 50%;
}

.flex-child-element {
  flex: 1;
  border: 2px solid blueviolet;
  margin: 10px;
}

.flex-child-element:first-child {
  margin-right: 20px;
}
</style>
<script src="ejs.min.js"></script>
</head>
<body>
  <div class="flex-parent-element">
    <div class="flex-child-element magenta">Flex Column 1
      <table id="hely">
        <tr><th>ID</th><th>Name</th><th>CountryCode</th><th>District</th><th>Population</th></tr>
      </table>
    </div>
    <div class="flex-child-element green">Flex Column 2</div>
  </div>

<script type="text/template" id="sablon">
  <% list.forEach(function(item) {%>
    <tr>
      <td><%= item.ID %></td>
      <td><%= item.Name %></td>
      <td><%= item.CountryCode %></td>
      <td><%= item.District %></td>
      <td><%= item.Population %></td>
    </tr>
  <%}); %>
</script>

<script>
  function getContent(url,method,template,target){
    fetch(url,{
        method: method
    })
    .then(response => response.json())
    .then(data => {
        templateStr = document.getElementById(template).innerHTML;
        compiled = ejs.render(templateStr, { list: data });
        const myTable = document.getElementById(target);
        myTable.innerHTML+=compiled;
      })
      .catch((error) => {
            document.getElementById(template).innerHTML="Hiba történt!"
            console.error(error)
        });

    } 

getContent('/varosok/1','GET','sablon','hely');
</script>  


</body>
</html>
